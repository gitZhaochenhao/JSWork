
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" href="css/index.css" />
		<!--<style>
			#wrap .contentWrap .content .bannerWrap .bannerList {
				width: 500%;
			}
		</style>-->
	</head>
	<body>
		<div id="wrap">
			<header class="header">
				<div class="headerTop">
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="" />
						</a>
					</h1>
					<a href="javascript:;" class="menuBtn menuBtnClose"></a>
					<div class="btns">
						<a href="javascript:;">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<form class="search">
					<input type="text" placeholder="请输入搜索内容。。。"/>
					<input type="submit" value="搜索"/>
				</form>
				<ul class="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</header>
			<div class="contentWrap">
				<div class="content">
					<nav class="navWrap">
						<ul class="navList">
							<li class="active">
								<a href="javascript:;">首页</a>
							</li>
							<li class="">
								<a href="javascript:;">MV</a>
							</li>
							<li class="">
								<a href="javascript:;">悦单</a>
							</li>
							<li class="">
								<a href="javascript:;">V榜</a>
							</li>
							<li class="">
								<a href="javascript:;">音悦</a>
							</li>
							<li class="">
								<a href="javascript:;">商城</a>
							</li>
							<li class="">
								<a href="javascript:;">节目</a>
							</li>
							<li class="">
								<a href="javascript:;">饭团</a>
							</li>
							<li class="">
								<a href="javascript:;">资讯</a>
							</li>
							<li class="">
								<a href="javascript:;">我的家</a>
							</li>
							<li class="">
								<a href="javascript:;">APP下载</a>
							</li>
							<li class="">
								<a href="javascript:;">热门应用</a>
							</li>
						</ul>
					</nav>
					<div class="bannerWrap">
						<ul class="bannerList">
							<li>
								<a href="javascript:;">
									<img src="img/1.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/2.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/3.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/4.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/5.jpg" alt="" />
								</a>
							</li>
							
						</ul>
						<div class="icons">
							<span class="active"></span>
							<span></span>
							<span></span>
							<span></span>
							<span></span>
						</div>
					</div>
					<div class="tab">
						<header class="tabHeader">
							<h3>MV首播</h3>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<nav class="tabNav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span class="smallGreen"></span>
						</nav>
						<div class="tabWrap">
							<div class="tabList">
								<ul class="Loading"></ul>
								<ul class="tabMain">
									<li>
										<a href="javascript:;">
											<img src="img/a.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/b.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/c.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/d.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/e.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/f.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
								</ul>
								<ul class="Loading"></ul>
							</div>
						</div>
						<div class="tabWrap">
							<div class="tabList">
								<ul class="Loading"></ul>
								<ul class="tabMain">
									<li>
										<a href="javascript:;">
											<img src="img/a.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/b.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/c.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/d.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/e.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/f.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
								</ul>
								<ul class="Loading"></ul>
							</div>
						</div>
						<div class="tabWrap">
							<div class="tabList">
								<ul class="Loading"></ul>
								<ul class="tabMain">
									<li>
										<a href="javascript:;">
											<img src="img/a.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/b.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/c.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/d.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/e.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/f.jpg" />
											<span>说服力升级啊空间从爱的能力后</span>
											<div class="ioces">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</a>
									</li>
								</ul>
								<ul class="Loading"></ul>
							</div>
						</div>
					</div>
				</div>
				<!--滚动条-->
				<div class="scrollBar"></div>
			</div>
		</div>
	</body>
	
	<script src="js/transform.js"></script>
	<script src="js/drag.js"></script>
	<script>
		!(function(){
			var width = document.documentElement.clientWidth;
			var styleNode = document.createElement('style');
			styleNode.innerHTML = 'html{font-size: '+ width/16 +'px !important;}';
			document.head.appendChild(styleNode);
		})();
		
		
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		});
		
		
		var aNodes = document.querySelectorAll('a');
		
		for(var i = 0; i < aNodes.length; i++){
			aNodes[i].addEventListener('touchstart',function(){
				window.location.href = this.href;
			})
		}
		
		//页面中有很多的图片，在我们动态操作的时候很可能因为图片没有加载好而出问题，所以window.onload
		window.onload=function(){
			//头部交互
		menuBtnChange();
		//手动的让文本输入框获取和失去焦点
		focusChange();
		//nav导航的滑动
		navMove();
		//nav导航变色
		changeColor();
		//banner交互
		bannerMove();
		// tab滑动逻辑
		tabMoveS();
		//主题内容滑屏逻辑与滚动条
		contentScroll();
		}
		//头部交互
//		menuBtnChange();
		function menuBtnChange(){
			var menuBtn = document.querySelector('#wrap .header .headerTop .menuBtn');
			var mask = document.querySelector('#wrap .header .mask');
			var flag = false;
			menuBtn.addEventListener('touchstart',function(event){
				if(flag){
					menuBtn.className = 'menuBtn menuBtnClose';
					mask.style.display = 'none';
				}else{
					menuBtn.className = 'menuBtn menuBtnOpen';
					mask.style.display = 'block';
				}
				flag = !flag;
				// 阻止事件冒泡，因为点击其它的地方要去隐藏mask，如果不阻止冒泡，点击按钮打开的时候，也会冒泡到document身上
				// 刚打开，就会关闭，我们看不到打开的效果
				event.stopPropagation();
				//因为我们阻止了事件冒泡，那么对于这个按钮来说浏览器默认行为就没办法去取消，因此我们需要给它单独取消；
				event.preventDefault();
			});
			
			
			document.addEventListener('touchstart',function(){
				if(flag){
					menuBtn.className = 'menuBtn menuBtnClose';
					mask.style.display = 'none';
				}
				flag = false;
			});
			
			mask.addEventListener('touchstart',function(event){
				event.stopPropagation();
				event.preventDefault();
			});
		}
		
		
		//手动的让文本输入框获取和失去焦点
//		focusChange();
		function focusChange(){
			var textInput = document.querySelector('#wrap .header .search input[type="text"]');
			textInput.addEventListener('touchstart',function(event){
				textInput.focus();
				event.stopPropagation();
				event.preventDefault();
			})
			
			document.addEventListener('touchstart',function(){
				textInput.blur();
			})
		}
		
		
		//nav导航的滑动
//		navMove();
		function navMove(){
			var navWrap = document.querySelector('#wrap .contentWrap .content .navWrap');
			var navList = document.querySelector('#wrap .contentWrap .content .navWrap .navList');
			var startX = 0;
			var eleX = 0;
			var s1 = 0;
			var s2 = 0;
			var t1 = 0;
			var t2 = 0;
			var timer=null;
			// Tween缓动算法
			var Tween = {
				Linear: function(t,b,c,d){ return c*t/d + b; },
				easeOut: function(t,b,c,d,s){
				    if (s == undefined) s = 1.70158;
				    return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
				}
			};
			
			// 按下
			navWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				navList.style.transition = 'none';
				eleX = transformCss(navList,'translateX');
				startX = touch.clientX;
				s1 = eleX;
				t1 = new Date().getTime();//毫秒  
				
				clearInterval(timer);
			});
			// 移动
			navWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var endX = touch.clientX;
				var disX = endX - startX;
				var lastX = eleX + disX;
				
				
				//临界值的橡皮筋效果，滑100走80  有一个阻尼系数，我们需要求一个阻尼系数来让100减到80 
				//这个系数必须是 0~1之间的一个小数，并且这个小数会越来越小，才能达到最终的极限；
				if(lastX > 0){
					// 1-目标区域/总区域
					var scale = 0.6 - lastX / (3*document.documentElement.clientWidth);
					lastX = lastX * scale;
				}else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
					var temp = Math.abs(lastX) - Math.abs(document.documentElement.clientWidth - navList.offsetWidth);
					var scale = 0.6 - temp / (3*document.documentElement.clientWidth);
					temp = temp * scale;
					lastX = document.documentElement.clientWidth - navList.offsetWidth - temp;
				}
				
				transformCss(navList,'translateX',lastX);
				
			});
			
			navWrap.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				//加速
				s2 = transformCss(navList,'translateX');//这个位置和move当中最终设置的位置是重合的;
				t2 = new Date().getTime();
				var speed = (s2 - s1) / (t2 - t1);
				var lastX = s2 + speed * 100;
				var timeAll=2;
				var type='Linear';
				// //回弹
				// var bezier = '';
				// if(lastX > 0){
				// 	lastX = 0;
				// 	bezier = 'cubic-bezier(.13,.67,.71,1.79)';
				// }else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
				// 	lastX = document.documentElement.clientWidth - navList.offsetWidth;
				// 	bezier = 'cubic-bezier(.13,.67,.71,1.79)';
				// }
				// navList.style.transition = '1s '+bezier;
				// transformCss(navList,'translateX',lastX);
				
				// t当前步数
				// b当前位置
				// c走多远
				// d总步数
				if(lastX>0){
					lastX=0;
					type='easeOut';
				}else if(lastX<document.documentElement.clientWidth-navList.offsetWidth){
					lastX=document.documentElement.clientWidth-navList.offsetWidth;
					type='easeOut';
				};
				TweenMove(navList,lastX,timeAll);
				function TweenMove(navList,lastX,timeAll){
					var t = 0;
					var b = transformCss(navList,'translateX');
					var c = lastX - b;
					var d = timeAll/0.2;
					
					timer=setInterval(function(){
						if(t>=d){
							clearInterval(timer);
						};
						t++;
						var lastX=Tween[type](t,b,c,d);
						transformCss(navList,'translateX',lastX);
					},20);
				};
				
			});
		}
		
		
		//nav导航变色
//		changeColor();
		function changeColor(){
			var navItems = document.querySelectorAll('#wrap .contentWrap .content .navWrap .navList li');
			var isMove = false;
			for(var i = 0; i < navItems.length; i++){
				//解决nav移动时候的误触问题。
				navItems[i].addEventListener('touchmove',function(){
					isMove = true;
				})
				
				navItems[i].addEventListener('touchend',function(){
					if(!isMove){
						for(var j = 0; j < navItems.length; j++){
							navItems[j].className = '';
						}
						this.className = 'active';
					};
					//重置状态；
					isMove = false;
					
				});
			}
		}
		
		//banner交互
//		bannerMove();
		function bannerMove(){
			var bannerWrap = document.querySelector('#wrap .contentWrap .content .bannerWrap');
			var bannerList = document.querySelector('#wrap .contentWrap .content .bannerWrap .bannerList');
			//无缝的结构添加一组
			bannerList.innerHTML += bannerList.innerHTML;
			
			var bannerItems = document.querySelectorAll('#wrap .contentWrap .content .bannerWrap .bannerList li');
			var bannerIcons = document.querySelectorAll('#wrap .contentWrap .content .bannerWrap .icons span');
			
			var styleNode = document.createElement('style');
			styleNode.innerHTML = '#wrap .contentWrap .content .bannerWrap .bannerList {width: '+ bannerItems.length +'00%;}';
			styleNode.innerHTML += '#wrap .contentWrap .content .bannerWrap .bannerList li {width: '+ 100/bannerItems.length +'%;}';
			document.head.appendChild(styleNode);
			
			var eleX = 0;
			var startX = 0;
			var startY = 0;
	//		var disX = 0`
			var index = 0;
			var isFirst = true;
			var timer = null;
			
			
			bannerWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				bannerList.style.transition = 'none';
				
				if(index == 0){
					index = bannerIcons.length;
					//要立马瞬变到第五张图片的位置  从0开始
					var lastX = -index * document.documentElement.clientWidth;
					transformCss(bannerList,'translateX',lastX);
				}else if(index == bannerItems.length - 1){
					index = bannerIcons.length - 1;
					var lastX = -index * document.documentElement.clientWidth;
					transformCss(bannerList,'translateX',lastX);
				}
				
				
				eleX = transformCss(bannerList,'translateX');
				startX = touch.clientX;
				startY = touch.clientY;
				isFirst = true;
				clearInterval(timer);
			});
			
			bannerWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				
				//非第一次滑屏的防抖逻辑,如果第一下的偏移纵向偏移大于水平偏移量那么便return，证明本次滑屏不需要轮播图进行移动，那么便直接退出
				if(!isFirst){
					console.log(1);
					return;
				}
				
				var endX = touch.clientX;
				var endY = touch.clientY;
				var disX = endX - startX;
				var disY = endY - startY;
				
				//只是在考虑滑屏时候第一次滑动的逻辑，看垂直方向是不是大于水平方向的距离差
				if(Math.abs(disY) > Math.abs(disX)){
					if(isFirst){
						isFirst = false;//给后面滑屏的非第一次置一个标志；
						return;//只是禁止第一次水平方向的逻辑
					};
				};
				
				console.log(2);
				
				
				
				var lastX = eleX + disX;
				transformCss(bannerList,'translateX',lastX);
			});
			
			bannerWrap.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				//判断手指滑屏的方向是向左滑还是向右滑
				//bannerList最终走的位置  = - 图片的下标  * 图片的宽度
				
				var lastX = transformCss(bannerList,'translateX');
	//			if(disX < 0){
	//				index = Math.ceil(-lastX / document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth
	//				bannerList.style.transition = '1s';
	//				transformCss(bannerList,'translateX',lastX);
	//			}else{
	//				index = Math.floor(-lastX / document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth
	//				bannerList.style.transition = '1s';
	//				transformCss(bannerList,'translateX',lastX);
	//			}
				
				index = Math.round(-lastX / document.documentElement.clientWidth);
				lastX = -index * document.documentElement.clientWidth;
				bannerList.style.transition = '1s';
				transformCss(bannerList,'translateX',lastX);
				
				
				for(var i = 0; i < bannerIcons.length; i++){
					bannerIcons[i].className = '';
				};
				bannerIcons[index%bannerIcons.length].className = 'active';
				
				autoRun();
			});
			
			
			
			//自动轮播定时器
			autoRun();
			function autoRun(){
				timer = setInterval(function(){
					if(index == 9){
						index = 4;
						var lastX = -index * document.documentElement.clientWidth;
						bannerList.style.transition = 'none';
						transformCss(bannerList,'translateX',lastX);
					};
					
					setTimeout(function(){
						index++;
						var lastX = -index * document.documentElement.clientWidth;
						bannerList.style.transition = '1s';
						transformCss(bannerList,'translateX',lastX);
						
						for(var i = 0; i < bannerIcons.length; i++){
							bannerIcons[i].className = '';
						}
						bannerIcons[index%bannerIcons.length].className = 'active';
						
					},20);
				},2000);
			};
		};
		
		// tab滑动逻辑
//		tabMoveS();
		function tabMoveS(){
			var tabWrap=document.querySelectorAll('#wrap .contentWrap .content .tab .tabWrap');
			var tablist=document.querySelectorAll('#wrap .contentWrap .content .tab .tabWrap .tabList');
			var tabNav=document.querySelector('#wrap .contentWrap .content .tab .tabNav')
			var smallGreen=document.querySelector('#wrap .contentWrap .content .tab .tabNav .smallGreen');
			var width=tabNav.offsetWidth;
			var isMove=false;
			var isFlag=false;
			// 小绿的位置标示
			var indexs=0;
			
			for (var i = 0; i < tabWrap.length; i++) {
				//将每一个对象传入函数，以减少使用this的次数
					tabMove(tabWrap[i],tablist[i]);
			};
			
			function tabMove(tabWrap,tabList){
				//初始化位置
				transformCss(tabList,'translateX',-width);
				var eleX=transformCss(tabList,'translateX');
				var startX=0;
				var startY=0;
				var loadings=tabList.querySelectorAll('.Loading');
				var disX=0;
				// 按下事件	
				tabWrap.addEventListener('touchstart',function(event){
					event=event||window.event;
					var touch = event.changedTouches[0];
					tabList.style.transition='0s';
					eleX=transformCss(tabList,'translateX');
					startX=touch.clientX;
					startY=touch.clientY;
					isFlag=false;
				});
				// 移动滑屏事件，切换页面
				tabWrap.addEventListener('touchmove',function(event){
					event=event||window.event;
					var touch = event.changedTouches[0];
					//当我们模拟加载时不允许用户滑动
					if(isMove){
						return;
					};
					// 防抖
					if(isFlag){
						return;
					};
					var endX=touch.clientX;
					var endY=touch.clientY;
					disX=endX-startX;
					var disY=endY-startY;
					
					// 防抖
					if(Math.abs(disY)>Math.abs(disX)){
						// 判断是否是第一次滑动
						if(!isFlag){
							isFlag=true;
							return;
						};
					};
					var lastX=disX+eleX;
					transformCss(tabList,'translateX',lastX);
					// 划过一半直接切换
					if(Math.abs(disX)>width/2){
						// 判断向那个方向进行滑动
						if(disX>0){
							lastX=0;
						}else{
							lastX=-2*width;
						};
						isMove=true;
						tabList.style.transition='1s';
						transformCss(tabList,'translateX',lastX);
						//过渡结束事件兼容,过渡结束后出现小图标转圈,之前没见过的兼容记住，检测过渡事件有绑定就有解除
						tabList.addEventListener('transitionend',func);
						tabList.addEventListener('webkitTransitionEnd',func);
						function func(){
							console.log(loadings.length)
							if(disX>0){
								loadings[0].style.opacity=1;
								loadings[1].style.opacity=0;
							}else{
								loadings[0].style.opacity=0;
								loadings[1].style.opacity=1;
							};
							//模拟数据加载
							setTimeout(function(){
								lastX=-width;
								tabList.style.transition='0s';
								transformCss(tabList,'translateX',lastX);
								//清除加载图标
								loadings[0].style.opacity=0;
								loadings[1].style.opacity=0;
								isMove=false;								
							},2000);
						};
						// 小绿移动
						if(disX>0){
							indexs--;
						}else{
							indexs++;
						};
						
						if(indexs<0){
							indexs=5;
						}else if(indexs>5){
							indexs=0;
						}
						var greenIndex=indexs*smallGreen.offsetWidth;
						smallGreen.style.transition='1s';
						transformCss(smallGreen,'translateX',greenIndex);
					}
				});
				// 抬起事件
				tabWrap.addEventListener('touchend',function(event){
					event=event||window.event;
					var touch = event.changedTouches[0];
					// 没超过一半自动恢复原位
					if(Math.abs(disX)<width/2){
						tabList.style.transition='1s';
						transformCss(tabList,'translateX',-width);
					}
				});
			};
		}
		
		//主题内容滑屏逻辑与滚动条
//		contentScroll();
		function contentScroll(){
			//整屏滚动,改进nav的橡皮筋与加速拖动特效来做整个屏幕内容区域的移动，nav的移动是横向的，只要将该函数中的所有横向变量值改为纵向的变量值即可
		var contentWrap=document.querySelector('#wrap .contentWrap');
		var content=document.querySelector('#wrap .contentWrap .content ');
		//滚动条
		var scrollBar=document.querySelector('#wrap .contentWrap .scrollBar');
		//滚动条高度   滚动条高/屏幕高=屏幕高/内容高
		var scrollScale=document.documentElement.clientHeight/content.offsetHeight
		//进度条真正高度
		scrollBar.style.height=scrollScale*document.documentElement.clientHeight; +'px';
		//回调函数，新增方法功能
		var scrollAdd={
			start:function(){
				scrollBar.style.opacity=1;
			},
			move:function(){
				//进度条移动方向与滑动方向相反
				var lastY=transformCss(content,'translateY');
				//进度条移动距离  = -(屏幕高/内容高)*当前内容位置
				transformCss(scrollBar,'translateY',-scrollScale*lastY);
			},
			end:function(){
				scrollBar.style.opacity=0;
			}
		};
		
		//调用拖拽橡皮筋加速效果函数，当我们想给一个已经封装好的方法函数新增内容功能时，我们要传入一个回调函数传入函数中，不要直接在封装好的函数中进行修改
		contentDrag(contentWrap,scrollAdd);
		}
	</script>
</html>
